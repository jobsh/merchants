<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.merchant.system.mapper.ConstractMapper">
    
    <resultMap type="Constract" id="ConstractResult">
        <result property="id"    column="id"    />
        <result property="num"    column="num"    />
        <result property="customerName"    column="customer_name"    />
        <result property="customerId"    column="customer_id"    />
        <result property="customerPhone"    column="customer_phone"    />
        <result property="type"    column="type"    />
        <result property="produce"    column="produce"    />
        <result property="dianmianName"    column="dianmian_name"    />
        <result property="dianmianNum"    column="dianmian_num"    />
        <result property="guarantee"    column="guarantee"    />
        <result property="fee"    column="fee"    />
        <result property="operation"    column="operation"    />
        <result property="manager"    column="manager"    />
        <result property="signDate"    column="sign_date"    />
        <result property="signUser"    column="sign_user"    />
        <result property="beginDate"    column="begin_date"    />
        <result property="endDate"    column="end_date"    />
        <result property="status"    column="status"    />
        <result property="remark"    column="remark"    />
    </resultMap>

    <sql id="selectConstractVo">
        select id, num, customer_name, customer_id, customer_phone, type, produce, dianmian_name, dianmian_num, guarantee, fee, operation, manager, sign_date, sign_user, begin_date, end_date, status, remark from biz_constract
    </sql>

    <select id="selectConstractList" parameterType="Constract" resultMap="ConstractResult">
        <include refid="selectConstractVo"/>
        <where>  
            <if test="num != null  and num != ''"> and num = #{num}</if>
            <if test="customerName != null  and customerName != ''"> and customer_name like concat('%', #{customerName}, '%')</if>
            <if test="customerPhone != null  and customerPhone != ''"> and customer_phone = #{customerPhone}</if>
            <if test="type != null  and type != ''"> and type = #{type}</if>
            <if test="produce != null  and produce != ''"> and produce = #{produce}</if>
            <if test="dianmianName != null  and dianmianName != ''"> and dianmian_name like concat('%', #{dianmianName}, '%')</if>
            <if test="dianmianNum != null "> and dianmian_num = #{dianmianNum}</if>
            <if test="operation != null  and operation != ''"> and operation = #{operation}</if>
            <if test="manager != null  and manager != ''"> and manager = #{manager}</if>
            <if test="signDate != null "> and sign_date = #{signDate}</if>
            <if test="beginDate != null "> and begin_date = #{beginDate}</if>
            <if test="endDate != null  and endDate != ''"> and end_date = #{endDate}</if>
            <if test="status != null  and status != ''"> and status = #{status}</if>
        </where>
    </select>
    
    <select id="selectConstractById" parameterType="Integer" resultMap="ConstractResult">
        <include refid="selectConstractVo"/>
        where id = #{id}
    </select>
        
    <insert id="insertConstract" parameterType="Constract" useGeneratedKeys="true" keyProperty="id">
        insert into biz_constract
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="num != null and num != ''">num,</if>
            <if test="customerName != null and customerName != ''">customer_name,</if>
            <if test="customerId != null">customer_id,</if>
            <if test="customerPhone != null and customerPhone != ''">customer_phone,</if>
            <if test="type != null and type != ''">type,</if>
            <if test="produce != null and produce != ''">produce,</if>
            <if test="dianmianName != null and dianmianName != ''">dianmian_name,</if>
            <if test="dianmianNum != null">dianmian_num,</if>
            <if test="guarantee != null">guarantee,</if>
            <if test="fee != null">fee,</if>
            <if test="operation != null and operation != ''">operation,</if>
            <if test="manager != null and manager != ''">manager,</if>
            <if test="signDate != null">sign_date,</if>
            <if test="signUser != null and signUser != ''">sign_user,</if>
            <if test="beginDate != null">begin_date,</if>
            <if test="endDate != null and endDate != ''">end_date,</if>
            <if test="status != null and status != ''">status,</if>
            <if test="remark != null and remark != ''">remark,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="num != null and num != ''">#{num},</if>
            <if test="customerName != null and customerName != ''">#{customerName},</if>
            <if test="customerId != null">#{customerId},</if>
            <if test="customerPhone != null and customerPhone != ''">#{customerPhone},</if>
            <if test="type != null and type != ''">#{type},</if>
            <if test="produce != null and produce != ''">#{produce},</if>
            <if test="dianmianName != null and dianmianName != ''">#{dianmianName},</if>
            <if test="dianmianNum != null">#{dianmianNum},</if>
            <if test="guarantee != null">#{guarantee},</if>
            <if test="fee != null">#{fee},</if>
            <if test="operation != null and operation != ''">#{operation},</if>
            <if test="manager != null and manager != ''">#{manager},</if>
            <if test="signDate != null">#{signDate},</if>
            <if test="signUser != null and signUser != ''">#{signUser},</if>
            <if test="beginDate != null">#{beginDate},</if>
            <if test="endDate != null and endDate != ''">#{endDate},</if>
            <if test="status != null and status != ''">#{status},</if>
            <if test="remark != null and remark != ''">#{remark},</if>
         </trim>
    </insert>

    <update id="updateConstract" parameterType="Constract">
        update biz_constract
        <trim prefix="SET" suffixOverrides=",">
            <if test="num != null and num != ''">num = #{num},</if>
            <if test="customerName != null and customerName != ''">customer_name = #{customerName},</if>
            <if test="customerId != null">customer_id = #{customerId},</if>
            <if test="customerPhone != null and customerPhone != ''">customer_phone = #{customerPhone},</if>
            <if test="type != null and type != ''">type = #{type},</if>
            <if test="produce != null and produce != ''">produce = #{produce},</if>
            <if test="dianmianName != null and dianmianName != ''">dianmian_name = #{dianmianName},</if>
            <if test="dianmianNum != null">dianmian_num = #{dianmianNum},</if>
            <if test="guarantee != null">guarantee = #{guarantee},</if>
            <if test="fee != null">fee = #{fee},</if>
            <if test="operation != null and operation != ''">operation = #{operation},</if>
            <if test="manager != null and manager != ''">manager = #{manager},</if>
            <if test="signDate != null">sign_date = #{signDate},</if>
            <if test="signUser != null and signUser != ''">sign_user = #{signUser},</if>
            <if test="beginDate != null">begin_date = #{beginDate},</if>
            <if test="endDate != null and endDate != ''">end_date = #{endDate},</if>
            <if test="status != null and status != ''">status = #{status},</if>
            <if test="remark != null and remark != ''">remark = #{remark},</if>
        </trim>
        where id = #{id}
    </update>

    <delete id="deleteConstractById" parameterType="Integer">
        delete from biz_constract where id = #{id}
    </delete>

    <delete id="deleteConstractByIds" parameterType="String">
        delete from biz_constract where id in 
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
    
</mapper>